# Документация    

## Описание приложения:

### Что ваше приложение делает?

"Shop" представляет собой интернет-магазин, разработанный для удобного онлайн-шопинга. 
Он предоставляет пользователям интуитивно понятный интерфейс для просмотра и управления ассортиментом товаров. 
Пользователи могут находить интересующие их товары и управлять ими в своей корзине и списке избранного.

### Основные функции приложения

Интернет-магазин "Shop" предлагает следующие ключевые функции:
- **Просмотр ассортимента товаров.**
- **Добавление и удаление товаров из корзины:** пользователи могут добавлять товары в корзину для дальнейшей покупки или удалять их.
- **Управление избранным:** пользователи могут добавлять товары в избранное и удалять их из него.
- **Фильтрация товаров:** приложение предоставляет возможность фильтрации товаров по различным категориям, таким как:
    - Цена
    - Цвет
    - Алфавитный порядок
    - Тип товара (мужское/женское/аксессуары/новое поступление)
    - Поисковая фильтрация (поиск осуществляется по ключевым словам, связанным с названием товара)

- **Расчет стоимости товаров в корзине:** пользователи могут видеть общую стоимость всех товаров, добавленных в корзину.

## Технологии и инструменты (стек):

Для создания приложения был использован следующий стек технологий:
- **ReactJS** для разработки SPA;
- **HTML и CSS** для создания структуры и дизайна приложения;
- **JavaScript** для создания функционала приложения;
- **React Hooks** для управления состоянием компонентов.

## Описание компонентов (common и UI):

## Компонент **App**
Компонент **App** является корневым компонентом веб-приложения. Он отвечает за отображение всех других компонентов и управляет их состоянием. Этот компонент служит основой для всей структуры приложения и связывает различные части интерфейса. 


## Общие компоненты (commonsComponent) для Shop и Cart:

### ***Компонент Header***
- **Функция**: cлужит «шапкой» приложения, обеспечивая навигацию и доступ к основным функциям на страницах **Shop** и **Cart**.
- **Содержимое**:
    - Логотип приложения.
    - Меню навигации для перехода между разделами.
    - Иконки для поиска, профиля, избранных товаров и корзины (переход на страницу корзины по клику).
    - Счетчики для отображения количества избранных товаров и товаров в корзине.
- **Пропсы**:
    - **onComponentChange**: функция для изменения активного компонента.
    - **basketCount**: количество товаров в корзине. Передаётся через контекст **BasketContext**.
    - **favoritesCount**: количество избранных товаров. Передаётся через контекст **FavoritesContext**.

### ***Компонент ContentArea***
Компонент **ContentArea** служит основным контейнером для отображения заголовка магазина и корзины в приложении. Он управляет состоянием активного компонента и отображает соответствующий контент в зависимости от выбора пользователя.

#### **Пропсы**: 
Данный компонент не принимает никаких пропсов.

#### **Описание**: 
* **Состояние**:
    - **activeComponent**: определяет, какой компонент отображается в данный момент (магазин или корзина)
* **Эффекты**:
    - использует хук `useCallback` для мемоизации функции `handleComponentChange`, чтобы избежать ненужных перерасчетов при каждом рендере.
* **Методы**:
    - **handleComponentChange()**: функция, которая возвращает активный компонент (Shop или Cart) в зависимости от значения `activeComponent`. Если `activeComponent === Cart`, возвращается компонент Cart. В противном случае возвращается компонент `Shop`, обёрнутый в **FilterProvider**.


### ***Компонент Footer***
Компонент **Footer** используется на страницах **Shop** и **Cart**. Он представляет собой нижнюю часть приложения и содержит:
- Информацию о бренде.
- Ссылки на различные разделы сайта.
- Дополнительную информацию и контактные данные.
**Footer** обеспечивает доступ к важной информации и помогает пользователям ориентироваться в приложении.


## Компоненты магазина (shopComponents):

### ***Компонент Shop***
Компонент `Shop` отвечает за отображение списка товаров. Он включает функциональность фильтрации и сортировки товаров, а также добавление товаров в корзину и избранное.

#### **Описание**: 
Компонент Shop использует несколько контекстов для управления состоянием приложения.
- **ProductsContext**: предоставляет доступ к списку продуктов
- **BasketContext**: предоставляет функции для добавления продуктов в корзин
- **FavoritesContext**: предоставляет функции для управления избранными продуктами
- **FilterContext**: предоставляет отсортированные продукты на основе примененных фильтров.

* **Состояние**:
    - **activePage**: состояние, определяющее текущую активную страницу для пагинации. Изначально устанавливается на 0
    - **itemsPerPage**: количество товаров на одной странице (по умолчанию 12).

*  **Методы**:
    - **buyProduct(product)**: Функция, которая добавляет продукт в корзину, используя метод `addToBasket` из контекста `BasketContext`
    - **useEffect**: общее количество страниц, вычисляемое на основе количества отсортированных
продуктов и количества продуктов на странице


### ***Компонент Newsletter***
Компонент **Newsletter** используется на страницах **Shop** и **Cart**. Он представляет собой форму подписки на новостную рассылку и содержит:
- Заголовок.
- Текст с описанием преимуществ подписки.
- Поле ввода для email.
- Кнопку подписки.
Этот компонент помогает пользователям оставаться в курсе новостей и акций, предлагая возможность подписаться на рассылку. 


### ***Компонент ReviewedProducts***
Компонент **ReviewedProducts** отображает три случайно выбранных продукта из общего списка доступных товаров.

#### Описание
Компонент использует контекст `ProductContext` для получения списка доступных продуктов. Он случайным образом выбирает три продукта и отображает их с соответствующими изображениями и ценами.

#### **Используемые контексты**
- **ProductsContext**: предоставляет доступ к списку продуктов.

#### **Состояние**
- **randomProducts**: состояние, хранящее три случайных продукта, выбранных из общего списка
продуктов. Изначально устанавливается как пустой массив.
- **getRandomProducts**: функция, которая выбирает случайные продукты из переданного массива. Она
создает копию массива продуктов, выбирает случайные элементы и возвращает массив случайных
продуктов.
- **useEffect**: хук, который вызывается при изменении списка продуктов. Он вызывает функцию
`getRandomProducts`, чтобы выбрать три случайных продукта и обновить состояние `randomProducts`.


### ***Компонент ProductList***
Компонент **ProductList** принимает массив продуктов и отображает каждый из них, используя компонент **Product**. Он также передает функции для покупки и добавления в избранное, а также информацию о том, является ли продукт избранным.

#### Пропсы
- **products**: массив объектов, представляющих продукты, которые необходимо отобразить
- **onBuy**: функция, вызываемая при покупке продукта. Передаётся в компонент `Product`
- **onFavorite**: функция, вызываемая при добавлении или удалении продукта из избранного. Передаётся в компонент `Product`
- **favorites**: массив объектов избранных продуктов, используемый для определения, является ли конкретный продукт избранным.


### ***Компонент Product***
Компонент **Product** принимает объект продукта и функции для обработки событий покупки и добавления в избранное. Он отображает визуальную информацию о продукте и позволяет пользователю взаимодействовать с ним.

#### Пропсы
- **product**: объект, содержащий информацию о конкретном продукте.
- **onFavorite**: функция, вызываемая при добавлении или удалении продукта из избранного, принимающая объект продукта в качестве аргумента.
- **isFavorite**: флаг, указывающий, является ли продукт избранным, используемый для отображения соответствующей иконки.
- **onBuy**: функция, вызываемая при нажатии кнопки **Buy**, принимающая объект продукта в качестве аргумента.


### ***Компонент Pagination***
Компонент **Pagination** принимает текущую активную страницу, функцию для обновления активной страницы и общее количество страниц. Он отображает стрелки для перехода на предыдущую и следующую страницы, а также номера страниц, по которым можно перейти.

#### Пропсы
- **activePage**: индекс текущей активной страницы (начиная с 0).
- **setActivePage**: функция, используемая для обновления активной страницы. Должна принимать новое значение индекса страницы.
- **pageCount**: общее количество страниц. Должно быть больше 0 для отображения навигации.


### ***Компонент SortFilter***
Компонент **SortFilter** предоставляет интерфейс для сортировки списка элементов. Он позволяет пользователю выбрать способ сортировки из выпадающего списка. Сортировка может быть по умолчанию, по возрастанию (ASC) или по убыванию (DESC).

#### ***Используемые контексты***
- **FilterContext**: компонент использует контекст `FilterContext` для доступа к функции `setSort`, которая отвечает за обновление состояния сортировки в приложении.

- Функциональность:
    - **handleSortChange**: функция, вызываемая при изменении значения в выпадающем списке. Она получает новое значение сортировки из события и передает его в `setSort`, обновляя состояние сортировки.


### ***Компонент SearchFilter***
Компонент **SearchFilter** предназначен для реализации функциональности поиска в приложении. Он позволяет пользователям вводить текст для фильтрации товары товаров. Компонент использует контекст для управления состоянием поискового запроса.

#### ***Используемые контексты***
- **FilterContext**: используется для доступа к функции `setSearchTerm`, которая отвечает за обновление состояния поискового запроса в приложении.

#### **Функциональность**
- **handleSearchChange**: функция, вызываемая при изменении значения в поле ввода. Она получает новое значение поискового запроса из события и передает его в `setSearchTerm`, обновляя состояние поискового запроса.


### ***Компонент CategoriesFilter***
Компонент **CategoriesFilter** предоставляет пользователям возможность фильтровать товары по категориям. Он отображает список категорий, из которых пользователь может выбрать одну. При выборе категории компонент обновляет состояние выбранной категории в приложении с помощью контекста.

#### **Используемые контексты**:
- **FilterContext**: используется для доступа к состоянию `selectedCategory` и функции `setSelectedCategory`, которые управляют выбранной категорией.

#### **Функциональность**:
- **handleCategoryClick**: эта функция вызывается при нажатии на элемент списка. Она получает выбранную категорию и обновляет состояние через `setSelectedCategory`.


### ***Компонент PriceFilter***
Компонент **PriceFilter** позволяет пользователям задавать минимальную и максимальную цену для фильтрации элементов. Он включает два текстовых поля для ввода цен и обновляет состояние фильтров через контекст. Компонент также обрабатывает случаи, когда введенные значения являются отрицательными.

#### **Функциональность**:
- **handleMinPriceChange**: эта функция вызывается при изменении значения в поле минимальной цены. Если введенное значение отрицательное, функция сбрасывает минимальную цену и выводит предупреждение. В противном случае обновляется состояние фильтрации с новым значением минимальной цены.
- **handleMaxPriceChange**: эта функция аналогична handleMinPriceChange, но для поля максимальной цены.

### ***Компонент ColorsFilter***
Компонент **ColorsFilter** предоставляет интерфейс для фильтрации товаров по цветам. Он позволяет пользователям выбирать один или несколько цветов в приложении. Компонент использует контекст дисплея управления состоянием цветов.

#### **Используемые контексты**
- **FilterContext**: используется для доступа к состоянию `colors` и функции `setColors`, которые отвечают за обновление выбранных цветов в приложении.

#### Функциональность
- **handleColorChange**: эта функция вызывается при изменении состояния чекбокса. Она получает значение цвета и статус чекбокса (выбран или не выбран) из события. Если чекбокс выбран, цвет добавляется в массив `colors`, если не выбран - удаляется из него.


## Компоненты корзины (cartComponents):

### ***Компонент Cart***
Компонент **Cart**  отображает содержимое корзины пользователя. Он включает информацию о добавленных товарах, их количестве, стоимости возможной скидки по промокоду, стоимости доставки, общей стоимости (с учётом скидки и доставки) и возможность редактирования или удаления товаров из корзины.


### ***Компонент ProductCart***
Компонент **ProductCart** представляет собой элемент продукта в корзине покупок. Он отображает информацию о продукте, такую как изображение, название, цена, количество и предоставляет функциональность для изменения количества и удаления продукта из корзины.

#### **Пропсы**:
- **product**: объект, представляющий продукт. 
- **onRemove**: функция, вызываемая при удалении продукта из корзины. Принимает `id` продукта.
- **onQuantityChange**: функция, вызываемая при изменении количества продукта. Принимает id продукта и значение изменения.

### ***Компонент ProductListCart***
Компонент **ProductListCart** отвечает за отображение списка продуктов, находящихся в корзине покупок. Он извлекает данные о продуктах из контекста BasketContext и отображает каждый продукт с помощью компонента Product. Также предоставляет функциональность для изменения количества продуктов и их удаления из корзины.

#### **Используемые контексты**:
- **BasketContext**: предоставляет данные о продуктах в корзине и функции для обновления корзины.

#### **Пропсы**:
- **productsInBasket**: массив продуктов, находящихся в корзине.
- **updateBasket**: функция для обновления состояния корзины.
- **removeFromBasket**: функция для удаления продукта из корзины.

#### **Методы**:
- **handleQuantityChange(id, change)**: Функция для изменения количества продукта.Вызывает updateBasket с обновленным массивом продуктов.

### ***Компонент OrderPrice***
Компонент **Order** отвечает за отображение информации о заказе в корзине покупок. Он вычисляет итоговую стоимость заказа, включая цену товаров, стоимость доставки и примененные скидки. Также предоставляет кнопку для оформления заказа.

#### **Используемые контексты**:
- **BasketContext**: компонент использует контекст `BasketContext` для доступа к данным о продуктах в корзине и информации о примененных скидках.

#### **Состояния**:
- **productsInBasket**: массив объектов, представляющих товары в корзине, каждый из которых содержит информацию о цене и количестве.
- **discountApplied**: логическое значение, указывающее, была ли применена скидка.

#### **Методы**:
- **orderPrice**: вычисляет общую стоимость товаров в корзине, умножая цену каждого товара на его количество и суммируя результаты.
- **deliveryPrice**: определяет стоимость доставки.
- **totalPrice**: вычисляет общую стоимость заказа, включая цену товаров, стоимость доставки и примененные скидки.
- **handleCheckoutClick**: функция, вызываемая при нажатии кнопки **Checkout**. Проверяет, пуста ли корзина. Если корзина пуста, выводит предупреждение. В противном случае, выводит сообщение об успешном оформлении заказа с указанием общей стоимости.


### ***Компонент PromoCodeWrapper***
Компонент **PromoCodeWrapper** отвечает за ввод и применение промокода для получения скидки. Он позволяет пользователю ввести промокод и применить его, проверяя его корректность. Если промокод правильный, применяется скидка, если нет — выводится сообщение об ошибке.

#### **Используемые контексты**:
- **useContext**: используется для доступа к **BasketContext**, который предоставляет функцию **setDiscountApplied** для изменения состояния скидки.

#### **Состояния**:
- **promoCode**: состояние, содержащее текст, введенный пользователем в поле для ввода промокода.

#### **Методы**:
- **handlePromoCodeChange**: функция, которая обновляет состояние promoCode при изменении значения в поле ввода.
- **applyPromoCode**: функция, вызываемая при нажатии кнопки для применения промокода.


## Константы: 

### ***PRODUCT_IN_BASKET_KEY***

#### Описание
Константа **PRODUCT_IN_BASKET_KEY** используется в качестве ключа для хранения информации о продуктах, добавленных в корзину.

- Применение:
    - Сохранение списка товаров в локальном хранилище (`localStorage`).
    - Обновление состояния корзины.
    - Получение данных о продуктах в корзине при загрузке приложения.


### ***PRODUCT_IN_FAVORITES_KEY***

#### Описание
Константа **PRODUCT_IN_FAVORITES_KEY** используется в качестве ключа для хранения информации о продуктах, добавленных в избранное.

- Применение:
    - Сохранение списка избранных товаров в локальном хранилище (`localStorage`).
    - Обновление состояния избранных товаров.
    - Получение данных о продуктах в избранном при загрузке приложения.


## Контекст 

### ***Компонент FilterProvider и контекст FilterContext***
**FilterProvider** - это компонент, который использует контекст для управления состоянием фильтров и сортировки продуктов. Он предоставляет методы и данные для фильтрации списка продуктов на основе различных критериев.

#### Описание
Компонент создает контекст **FilterContext** и предоставляет ero значения через **FilterProvider**. Он использует `ProductsContext` для доступа к списку продуктов и управляет состоянием фильтров, выбранной категории, отсортированными продуктами и состоянием кнопки применения фильтров.

- Состояния:
    - **filters**: объект, содержащий текущие фильтры.
    - **selectedCategory**: хранит текущее значение выбранной категории.
    - **sortedProducts**: список продуктов, отсортированных в соответствии с установленными фильтрами.
    - **filteredByCategoryAndPrice**: список продуктов, отфильтрованных по категории и цене.
    - **isButtonDisabled**: указывает, должна ли кнопка пименения фильтров быть отключена.

- Методы:
    - **applyAllFilters**: применяет все активные фильтры к списку продуктов и обновляет состояния `filteredByCategoryAndPrice` и `sortedProducts`.
    - **filterAndSortProducts**: функция, которая фильтрует и cортирует продукты на основе поискового термина и выбранной сортировки. Использует `useCallback` для оптимизации производительности.
    - **updateFilter**: обновляет состояние фильтров на основе новых значений и активирует кнопку применения фильтров, если выбраны какие-либо параметры.
    - **resetFilter**: сбрасывает все фильтры к значениям по умолчанию и обновляет состояния `sortedProducts` и `filteredByCategoryAndPrice`.

- Эффекты: 
    - **useEffect**: используется для повторного применения фильтров и сортироваки при изменении состояния `filteredByCategoryAndPrice`.

### ***Контекст ProductsContext***
**ProductsContext** - это контекст, который предоставляет данные о продуктах для использования в приложении.

#### Описание
- **createContext**: используется для создания нового контекста.
- **Данные о продуктах**: импортируются из файла `products.json`, который содержит массив объектов продуктов.


### ***Контекст FavoritesContext***
**FavoritesContext** предоставляет контекст для управления списком избранных продуктов в приложении. Он позволяет компонентам добавлять или удалять продукты из избранного и отслеживать количество избранных продуктов.

#### **Состояния**
- **productsInFavorites**: массив объектов, представляющих продукты, добавленные в избранное.
- **favoritesCount**: число продуктов в избранном. Это значение обновляется автоматически при добавлении или удалении продукта из избранного.

#### **Методы**
- **toggleFavorite(product)**: функция для добавления или удаления продукта из избранного.


### ***Контекст BasketContext***
**BasketContext** предоставляет контекст для управления корзиной покупок в приложении. Он позволяет компонентам добавлять, обновлять и удалять продукты в корзине, а также отслеживать общее количество продуктов и применение скидок.

#### **Состояния**
- **рroductsInBasket**: мaссив объектов, представляющих продукты в корзине.
- **discountApplied**: логическое значение, указывающее, была ли применена скидка к корзине.

#### Методы
- **addToBasket(product)**: функция для добавления продукта в корзину. Обновляет состояние `productsInBasket` и сохраняет изменения в локальном хранилище.
- **updateBasket(updatedProducts)**: функция для обновления корзины с новым массивом продуктов. Обновляет состояние `productsInBasket` и сохраняет изменения в локальном хранилище.
- **removeFromBasket(id)**: функция для удаления продукта из корзины по его идентификатору. Вызывает `updateBasket` для обновления состояния корзины.

#### Дополнительные вычисляемые значения
- **totalQuantity**: общее количество продуктов в корзине.


## ***Пользовательские хуки***

### ***Хук useLocalStorage***
**useLocalStorage** - это пользовательский хук, который предоставляет функции для работы с локальным хранилищем браузера.

#### Описание
Хук, который предоставляет методы для работы с локальным хранилищем.

- Методы:
    - **setLocalStorage(key, value)** : сохраняет значение в локальном хранилище под указанным ключом. Преобразует значение в строку JSON.
    - **getLocalStorage(key)**: возвращает значение из локального хранилища, преобразованное из строки JSON обратно в объект.
    - **clearLocalStorage(key)**: удаляет элемент из локального хранилища по указанному ключу.



# Логика работы приложения
Логика в приложении **Shop** функционал реализован с использованием следующих подходов:
1. **Управление состоянием через контексты.** Используются контексты `FilterContext` и `ProductsContext`, чтобы компоненты могли получать нужные данные без передачи пропсов. Это делает код более понятным и упрощает разработку.
2. **Пользовательские хуки.** Пользовательские хуки помогают переиспользовать логику состояния в разных компонентах. Это делает код более модульным и легким для чтения.
3. **Компонентный подход.** Разбивая приложение на компоненты улучшается читабельность кода, упрощается управление и это оптимизирует приложение.
4. **Сохранение состояния в локальном хранилище.** Сохранение состояния в локальном хранилище позволяет пользователям сохранить данные о товарах между сессиями.








# Getting Started with Create React App

This project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app).

## Available Scripts

In the project directory, you can run:

### `npm start`

Runs the app in the development mode.\
Open [http://localhost:3000](http://localhost:3000) to view it in your browser.

The page will reload when you make changes.\
You may also see any lint errors in the console.

### `npm test`

Launches the test runner in the interactive watch mode.\
See the section about [running tests](https://facebook.github.io/create-react-app/docs/running-tests) for more information.

### `npm run build`

Builds the app for production to the `build` folder.\
It correctly bundles React in production mode and optimizes the build for the best performance.

The build is minified and the filenames include the hashes.\
Your app is ready to be deployed!

See the section about [deployment](https://facebook.github.io/create-react-app/docs/deployment) for more information.

### `npm run eject`

**Note: this is a one-way operation. Once you `eject`, you can't go back!**

If you aren't satisfied with the build tool and configuration choices, you can `eject` at any time. This command will remove the single build dependency from your project.

Instead, it will copy all the configuration files and the transitive dependencies (webpack, Babel, ESLint, etc) right into your project so you have full control over them. All of the commands except `eject` will still work, but they will point to the copied scripts so you can tweak them. At this point you're on your own.

You don't have to ever use `eject`. The curated feature set is suitable for small and middle deployments, and you shouldn't feel obligated to use this feature. However we understand that this tool wouldn't be useful if you couldn't customize it when you are ready for it.

## Learn More

You can learn more in the [Create React App documentation](https://facebook.github.io/create-react-app/docs/getting-started).

To learn React, check out the [React documentation](https://reactjs.org/).

### Code Splitting

This section has moved here: [https://facebook.github.io/create-react-app/docs/code-splitting](https://facebook.github.io/create-react-app/docs/code-splitting)

### Analyzing the Bundle Size

This section has moved here: [https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size](https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size)

### Making a Progressive Web App

This section has moved here: [https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app](https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app)

### Advanced Configuration

This section has moved here: [https://facebook.github.io/create-react-app/docs/advanced-configuration](https://facebook.github.io/create-react-app/docs/advanced-configuration)

### Deployment

This section has moved here: [https://facebook.github.io/create-react-app/docs/deployment](https://facebook.github.io/create-react-app/docs/deployment)

### `npm run build` fails to minify

This section has moved here: [https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify](https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify)
