# Документация    

## Описание приложения:

### Что ваше приложение делает?

"Shop" представляет собой интернет-магазин, разработанный для удобного онлайн-шопинга. 
Он предоставляет пользователям интуитивно понятный интерфейс для просмотра и управления ассортиментом товаров. 
Пользователи могут находить интересующие их товары и управлять ими в своей корзине и списке избранного.

### Основные функции приложения

Интернет-магазин "Shop" предлагает следующие ключевые функции:
- **Просмотр ассортимента товаров.**
- **Добавление и удаление товаров из корзины:** пользователи могут добавлять товары в корзину для дальнейшей покупки или удалять их.
- **Управление избранным:** пользователи могут добавлять товары в избранное и удалять их из него.
- **Фильтрация товаров:** приложение предоставляет возможность фильтрации товаров по различным категориям, таким как:
    - Цена
    - Цвет
    - Алфавитный порядок
    - Тип товара (мужское/женское/аксессуары/новое поступление)
    - Поисковая фильтрация (поиск осуществляется по ключевым словам, связанным с названием товара)

- **Расчет стоимости товаров в корзине:** пользователи могут видеть общую стоимость всех товаров, добавленных в корзину.

## Технологии и инструменты (стек):

Для создания приложения был использован следующий стек технологий:
- **ReactJS** для разработки SPA;
- **HTML и CSS** для создания структуры и дизайна приложения;
- **JavaScript** для создания функционала приложения;
- **React Hooks** для управления состоянием компонентов.

## Описание компонентов (common и UI):

## Компонент **App**
Компонент **App** является корневым компонентом веб-приложения. Он отвечает за отображение всех других компонентов и управляет их состоянием. Этот компонент служит основой для всей структуры приложения и связывает различные части интерфейса. 


## Общие компоненты (commonsComponent) для Shop и Cart:

### ***Компонент Header***
- **Функция**: cлужит «шапкой» приложения, обеспечивая навигацию и доступ к основным функциям на страницах **Shop** и **Cart**.
- **Содержимое**:
    - Логотип приложения.
    - Меню навигации для перехода между разделами.
    - Иконки для поиска, профиля, избранных товаров и корзины (переход на страницу корзины по клику).
    - Счетчики для отображения количества избранных товаров и товаров в корзине.
- **Пропсы**:
    - **onComponentChange**: функция для изменения активного компонента.
    - **basketCount**: количество товаров в корзине. Передаётся через контекст **BasketContext**.
    - **favoritesCount**: количество избранных товаров. Передаётся через контекст **FavoritesContext**.

### ***Компонент ContentArea***
Компонент **ContentArea** служит основным контейнером для отображения заголовка магазина и корзины в приложении. Он управляет состоянием активного компонента и отображает соответствующий контент в зависимости от выбора пользователя.

#### **Пропсы**: 
Данный компонент не принимает никаких пропсов.

#### **Описание**: 
* **Состояние**:
    - **activeComponent**: определяет, какой компонент отображается в данный момент (магазин или корзина)
* **Методы**:
    - **handleComponentChange()**: функция, которая обновляет состояние activeComponent на переданное значение (например, **Shop** или **Cart**), тем самым изменяя отображаемый компонент.


### ***Компонент FirstScreen***
Компонент **FirstScreen** служит основным экраном приложения, позволяя пользователям переключаться между разделами **Shop** и **Cart**. Он отображает заголовок активного компонента и предоставляет навигацию для выбора между этими двумя разделами.

#### **Пропсы**: 
- **activeComponent**: определяет, какой компонент в данный момент активен.
- **handleComponentChange**: функция, которая вызывается при изменении активного компонента. 


### ***Компонент Footer***
Компонент **Footer** используется на страницах **Shop** и **Cart**. Он представляет собой нижнюю часть приложения и содержит:
- Информацию о бренде.
- Ссылки на различные разделы сайта.
- Дополнительную информацию и контактные данные.
**Footer** обеспечивает доступ к важной информации и помогает пользователям ориентироваться в приложении.


## Компоненты магазина (shopComponents):

### ***Компонент Shop***
Компонент `Shop` отвечает за отображение списка товаров. Он включает функциональность фильтрации и сортировки товаров, а также добавление товаров в корзину и избранное.


### ***Компонент Newsletter***
Компонент **Newsletter** используется на страницах **Shop** и **Cart**. Он представляет собой форму подписки на новостную рассылку и содержит:
- Заголовок.
- Текст с описанием преимуществ подписки.
- Поле ввода для email.
- Кнопку подписки.
Этот компонент помогает пользователям оставаться в курсе новостей и акций, предлагая возможность подписаться на рассылку. 


### ***Компонент ReviewedProducts***
Компонент **ReviewedProducts** отображает три случайно выбранных продукта из общего списка доступных товаров.

#### Описание
Компонент использует контекст `ProductContext` для получения списка доступных продуктов. Он случайным образом выбирает три продукта и отображает их с соответствующими изображениями и ценами.

#### **Используемые контексты**
- **ProductsContext**: предоставляет доступ к списку продуктов.

#### **Состояние**
- **randomProducts**: состояние, хранящее три случайных продукта, выбранных из общего списка
продуктов. Изначально устанавливается как пустой массив.

#### **Методы**:
- **getRandomProducts(products, count)**: функция, которая выбирает случайные продукты из переданного массива.


### ***Компонент ProductList***
Компонент **ProductList** отображает продукты, используя компонент **Product**. Он получает текущие продукты из контекста фильтрации и отображает их в виде списка. 

#### **Контекст**:
- **FilterContext**: предоставляет доступ к текущим отфильтрованным элементам (`currentItems`).


### ***Компонент Product***
Компонент **Product** получает объект продукта в качестве пропса и использует контексты `FavoritesContext` и `BasketContext` для управления избранными продуктами и добавления продуктов в корзину. Он отображает визуальную информацию о продукте и позволяет пользователю взаимодействовать с ним.

#### **Контекст**:
- **FavoritesContext**: предоставляет функции для добавления и удаления продуктов из избранного, а также массив избранных продуктов.
- **BasketContext**: предоставляет функцию для добавления продуктов в корзину.

#### Пропсы
- **product**: объект, содержащий информацию о конкретном продукте.


### ***Компонент Pagination***
Компонент **Pagination** отвечает за управление навигацией между страницами, позволяя пользователю переходить между разными наборами данных. Он отображает стрелки для перехода на предыдущую и следующую страницы, а также номера страниц, по которым можно перейти.

#### **Контекст**: 
- **FilterContext**: предоставляет доступ к текущей активной странице, функции для обновления активной страницы и общему количеству страниц.


### ***Компонент ProductsCount***
Компонент **ProductsCount** отображает количество продуктов в текущей категории, учитывая примененные фильтры и сортировку.

#### **Контекст**: 
- **ProductsContext**: предоставляет доступ к списку всех продуктов.
- **FilterContext**: предоставляет доступ к текущему состоянию фильтров и сортировки.


### ***Компонент SortFilter***
Компонент **SortFilter** предоставляет интерфейс для сортировки списка элементов. Он позволяет пользователю выбрать способ сортировки из выпадающего списка. Сортировка может быть по умолчанию, по возрастанию (ASC) или по убыванию (DESC).

#### ***Используемые контексты***
- **FilterContext**: компонент использует контекст `FilterContext` для доступа к функции `setSort`, которая отвечает за обновление состояния сортировки в приложении.

#### **Функциональность**:
- **handleSortChange**: функция, вызываемая при изменении значения в выпадающем списке. Она получает новое значение сортировки из события и передает его в `setSort`, обновляя состояние сортировки.


### ***Компонент SearchFilter***
Компонент **SearchFilter** предназначен для реализации функциональности поиска в приложении. Он позволяет пользователям вводить текст для фильтрации товары товаров. Компонент использует контекст для управления состоянием поискового запроса.

#### ***Используемые контексты***
- **FilterContext**: используется для доступа к функции `setSearchTerm`, которая отвечает за обновление состояния поискового запроса в приложении.

#### **Функциональность**
- **handleSearchChange**: функция, вызываемая при изменении значения в поле ввода. Она получает новое значение поискового запроса из события и передает его в `setSearchTerm`, обновляя состояние поискового запроса.


### ***Компонент CategoriesFilter***
Компонент **CategoriesFilter** предоставляет пользователям возможность фильтровать товары по категориям. Он отображает список категорий, из которых пользователь может выбрать одну. При выборе категории компонент обновляет состояние выбранной категории в приложении с помощью контекста.

#### **Используемые контексты**:
- **FilterContext**: используется для доступа к состоянию `selectedCategory` и функции `setSelectedCategory`, которые управляют выбранной категорией.

#### **Функциональность**:
- **handleCategoryClick**: эта функция вызывается при нажатии на элемент списка. Она получает выбранную категорию и обновляет состояние через `setSelectedCategory`.
- **isCategorySelected**: функция, проверяющая, является ли категория выбранной, и возвращающая соответствующий стиль для активного элемента списка.


### ***Компонент PriceFilter***
Компонент **PriceFilter** позволяет пользователям задавать минимальную и максимальную цену для фильтрации элементов. Он включает два текстовых поля для ввода цен и обновляет состояние фильтров через контекст. Компонент также обрабатывает случаи, когда введенные значения являются отрицательными.

#### **Контекст**:
- **FilterContext**: используется для доступа к состояниям, которые управляют ценовыми фильтрами.

#### **Функциональность**:
- **handleMinPriceChange**: эта функция вызывается при изменении значения в поле минимальной цены. Если введенное значение отрицательное, функция сбрасывает минимальную цену и выводит предупреждение. В противном случае обновляется состояние фильтрации с новым значением минимальной цены.
- **handleMaxPriceChange**: эта функция аналогична `handleMinPriceChange`, но для поля максимальной цены.


### ***Компонент ColorsFilter***
Компонент **ColorsFilter** предоставляет интерфейс для фильтрации товаров по цветам. Он позволяет пользователям выбирать один или несколько цветов в приложении. Компонент использует контекст дисплея управления состоянием цветов.

#### **Используемые контексты**
- **FilterContext**: используется для доступа к состоянию `colors` и функции `setColors`, которые отвечают за обновление выбранных цветов в приложении.

#### Функциональность
- **handleColorChange**: эта функция вызывается при изменении состояния чекбокса. Она получает значение цвета и статус чекбокса (выбран или не выбран) из события. Если чекбокс выбран, цвет добавляется в массив `colors`, если не выбран - удаляется из него.


### ***Компонент ApplyFilterBtn***
Компонент **ApplyFilterBtn** предоставляет пользователям кнопку для применения всех выбранных фильтров. При нажатии на кнопку вызывается функция, которая обрабатывает фильтрацию товаров в приложении. Компонент использует контекст для доступа к необходимой функции.

#### **Используемые контексты**:
- **FilterContext**: используется для доступа к функции `applyAllFilters`, которая отвечает за применение всех выбранных фильтров в приложении.

#### **Функциональность**:
- **onClick**: при нажатии на кнопку вызывается функция `applyAllFilters`, которая обрабатывает логику применения фильтров к товарам.



## Компоненты корзины (cartComponents):

### ***Компонент Cart***
Компонент **Cart**  отображает содержимое корзины пользователя. Он включает информацию о добавленных товарах, их количестве, стоимости возможной скидки по промокоду, стоимости доставки, общей стоимости (с учётом скидки и доставки) и возможность редактирования или удаления товаров из корзины.

#### **Состояния**:
- **discountApplied**: состояние, которое указывает, была ли применена скидка через промокод.


### ***Компонент ProductCart***
Компонент **ProductCart** представляет собой элемент продукта в корзине покупок. Он отображает информацию о продукте, такую как изображение, название, цена, количество и предоставляет функциональность для изменения количества и удаления продукта из корзины.

#### **Пропсы**:
- **product**: объект, представляющий продукт. 
- **onRemove**: функция, вызываемая при удалении продукта из корзины. Принимает `id` продукта.
- **onQuantityChange**: функция, вызываемая при изменении количества продукта. Принимает id продукта и значение изменения.


### ***Компонент ProductListCart***
Компонент **ProductListCart** отвечает за отображение списка продуктов, находящихся в корзине покупок. Он извлекает данные о продуктах из контекста `BasketContext` и отображает каждый продукт с помощью компонента `ProductCart`. Также предоставляет функциональность для изменения количества продуктов и их удаления из корзины.

#### **Используемые контексты**:
- **BasketContext**: предоставляет данные о продуктах в корзине и функции для обновления корзины:
    - **productsInBasket**: массив продуктов, находящихся в корзине.
    - **updateBasket**: функция для обновления состояния корзины.
    - **removeFromBasket**: функция для удаления продукта из корзины.

#### **Методы**:
- **handleQuantityChange(id, change)**: Функция для изменения количества продукта. Вызывает `updateBasket` с обновленным массивом продуктов.


### ***Компонент OrderPrice***
Компонент **Order** отвечает за отображение информации о заказе в корзине покупок. Он вычисляет итоговую стоимость заказа, включая цену товаров, стоимость доставки и примененные скидки. Также предоставляет кнопку для оформления заказа.

#### **Используемые контексты**:
- **BasketContext**: компонент использует контекст для доступа к данным о продуктах в корзине.

#### **Пропсы**:
- **discountApplied**: указывает, была ли применена скидка на заказ.

#### **Состояния**:
- **productsInBasket**: массив объектов, представляющих товары в корзине, каждый из которых содержит информацию о цене и количестве.

#### **Методы**:
- **orderPrice**: вычисляет общую стоимость товаров в корзине, умножая цену каждого товара на его количество и суммируя результаты.
- **deliveryPrice**: определяет стоимость доставки.
- **totalPrice**: вычисляет общую стоимость заказа, включая цену товаров, стоимость доставки и примененные скидки.
- **handleCheckoutClick**: функция, вызываемая при нажатии кнопки **Checkout**. Проверяет, пуста ли корзина. Если корзина пуста, выводит предупреждение. В противном случае, выводит сообщение об успешном оформлении заказа с указанием общей стоимости.


### ***Компонент PromoCodeWrapper***
Компонент **PromoCodeWrapper** отвечает за ввод и применение промокода для получения скидки. Он позволяет пользователю ввести промокод и применить его, проверяя его корректность. Если промокод правильный, применяется скидка, если нет — выводится сообщение об ошибке.

#### **Используемые контексты**:
- **BasketContext**: используется для доступа к данным о продуктах в корзине, что позволяет проверить, пуста ли корзина перед применением промокода.

#### **Пропсы**:
- **setDiscountApplied**: функция, переданная в компонент, для изменения состояния применения скидки.

#### **Состояния**:
- **promoCode**: состояние, содержащее текст, введенный пользователем в поле для ввода промокода.

#### **Методы**:
- **handlePromoCodeChange**: функция, которая обновляет состояние `promoCode` при изменении значения в поле ввода.
- **applyPromoCode**: функция, вызываемая при нажатии кнопки для применения промокода.


## Константы: 

### ***PRODUCT_IN_BASKET_KEY***

#### Описание
Константа **PRODUCT_IN_BASKET_KEY** используется в качестве ключа для хранения информации о продуктах, добавленных в корзину.

- Применение:
    - Сохранение списка товаров в локальном хранилище (`localStorage`).
    - Обновление состояния корзины.
    - Получение данных о продуктах в корзине при загрузке приложения.


### ***PRODUCT_IN_FAVORITES_KEY***

#### Описание
Константа **PRODUCT_IN_FAVORITES_KEY** используется в качестве ключа для хранения информации о продуктах, добавленных в избранное.

- Применение:
    - Сохранение списка избранных товаров в локальном хранилище (`localStorage`).
    - Обновление состояния избранных товаров.
    - Получение данных о продуктах в избранном при загрузке приложения.


### ***ITEMS_PER_PAGE***
#### Описание
Константа **ITEMS_PER_PAGE** определяет количество товаров, отображаемых на одной странице в интерфейсе приложения.

- Применение:
    - Управление пагинацией при отображении списка товаров.
    - Оптимизация пользовательского интерфейса для удобства навигации.
    - Установка стандартного количества элементов для загрузки при прокрутке или переключении страниц.


## Контекст 

### ***Компонент FilterProvider и контекст FilterContext***
**FilterProvider** - это компонент, который использует контекст для управления состоянием фильтров и сортировки продуктов. Он предоставляет методы и данные для фильтрации списка продуктов на основе различных критериев.

#### Описание
Компонент создает контекст **FilterContext** и предоставляет ero значения через **FilterProvider**. Он использует `ProductsContext` для доступа к списку продуктов и управляет состоянием фильтров, выбранной категории, отсортированными продуктами и состоянием кнопки применения фильтров.

- Состояния:
    - **selectedCategory**: хранит текущее значение выбранной категории для фильтрации продуктов.
    - **searchTerm**: строка, используемая для поиска продуктов по имени.
    - **sort**: значение, определяющее порядок сортировки продуктов (ASC или DESC).
    - **minPrice**: минимальная цена для фильтрации продуктов.
    - **maxPrice**: максимальная цена для фильтрации продуктов.
    - **colors**: массив выбранных цветов для фильтрации продуктов.
    - **searchFilterSort**: массив продуктов, отфильтрованных и отсортированных в соответствии с установленными фильтрами.
    - **activePage**: текущая страница для пагинации.

- Методы:
    - **applyAllFilters**: применяет все активные фильтры к списку продуктов и обновляет состояние `searchFilterSort`.

- Эффекты: 
    - **useEffect**: используется для повторного применения фильтров и сортироваки при изменении состояния `searchTerm` или `sort`.

- Оптимизация:
    - **useMemo**: используется для вычисления текущих элементов на странице, основываясь на активной странице и отфильтрованных продуктах, что позволяет избежать ненужных пересчетов.

- Пагинация:
    - **currentItems**: возвращает массив продуктов, отображаемых на текущей странице.
    - **pageCount**: вычисляет общее количество страниц на основе количества отфильтрованных продуктов и константы `ITEMS_PER_PAGE`.


### ***Контекст ProductsContext***
**ProductsContext** - это контекст, который предоставляет данные о продуктах для использования в приложении.

#### Описание
- **createContext**: используется для создания нового контекста.
- **Данные о продуктах**: импортируются из файла `products.json`, который содержит массив объектов продуктов.


### ***Контекст FavoritesContext***
**FavoritesContext** предоставляет контекст для управления списком избранных продуктов в приложении. Он позволяет компонентам добавлять или удалять продукты из избранного и отслеживать количество избранных продуктов.

#### Описание:
- **createContext**: используется для создания нового контекста, который позволяет компонентам получать доступ к данным о избранных продуктах.
- **useLocalStorage**: используется для работы с локальным хранилищем, чтобы сохранять и извлекать список избранных продуктов.

#### **Состояния**
- **productsInFavorites**: массив объектов, представляющих продукты, добавленные в избранное.
- **favoritesCount**: число продуктов в избранном. Это значение обновляется автоматически при добавлении или удалении продукта из избранного.

#### **Методы**
- **toggleFavorite(product)**: функция для добавления или удаления продукта из избранного.


### ***Контекст BasketContext***
**BasketContext** предоставляет контекст для управления корзиной покупок в приложении. Он позволяет компонентам добавлять, обновлять и удалять продукты в корзине, а также отслеживать общее количество продуктов и применение скидок.

#### **Состояния**
- **рroductsInBasket**: мaссив объектов, представляющих продукты в корзине.

#### Методы
- **addToBasket(product)**: функция для добавления продукта в корзину. Обновляет состояние `productsInBasket` и сохраняет изменения в локальном хранилище.
- **updateBasket(updatedProducts)**: функция для обновления корзины с новым массивом продуктов. Обновляет состояние `productsInBasket` и сохраняет изменения в локальном хранилище.
- **removeFromBasket(id)**: функция для удаления продукта из корзины по его идентификатору. Вызывает `updateBasket` для обновления состояния корзины.

#### Дополнительные вычисляемые значения
- **totalQuantity**: общее количество продуктов в корзине.


## ***Пользовательские хуки***

### ***Хук useLocalStorage***
**useLocalStorage** - это пользовательский хук, который предоставляет функции для работы с локальным хранилищем браузера.

#### Описание
Хук, который предоставляет методы для работы с локальным хранилищем.

- Методы:
    - **setLocalStorage(key, value)** : сохраняет значение в локальном хранилище под указанным ключом. Преобразует значение в строку JSON.
    - **getLocalStorage(key)**: возвращает значение из локального хранилища, преобразованное из строки JSON обратно в объект.
    - **clearLocalStorage(key)**: удаляет элемент из локального хранилища по указанному ключу.



# Логика работы приложения
Логика в приложении **Shop** функционал реализован с использованием следующих подходов:
1. **Управление состоянием через контексты.** Используются контексты `FilterContext` и `ProductsContext`, чтобы компоненты могли получать нужные данные без передачи пропсов. Это делает код более понятным и упрощает разработку.
2. **Пользовательские хуки.** Пользовательские хуки помогают переиспользовать логику состояния в разных компонентах. Это делает код более модульным и легким для чтения.
3. **Компонентный подход.** Разбивая приложение на компоненты улучшается читабельность кода, упрощается управление и это оптимизирует приложение.
4. **Сохранение состояния в локальном хранилище.** Сохранение состояния в локальном хранилище позволяет пользователям сохранить данные о товарах между сессиями.








# Getting Started with Create React App

This project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app).

## Available Scripts

In the project directory, you can run:

### `npm start`

Runs the app in the development mode.\
Open [http://localhost:3000](http://localhost:3000) to view it in your browser.

The page will reload when you make changes.\
You may also see any lint errors in the console.

### `npm test`

Launches the test runner in the interactive watch mode.\
See the section about [running tests](https://facebook.github.io/create-react-app/docs/running-tests) for more information.

### `npm run build`

Builds the app for production to the `build` folder.\
It correctly bundles React in production mode and optimizes the build for the best performance.

The build is minified and the filenames include the hashes.\
Your app is ready to be deployed!

See the section about [deployment](https://facebook.github.io/create-react-app/docs/deployment) for more information.

### `npm run eject`

**Note: this is a one-way operation. Once you `eject`, you can't go back!**

If you aren't satisfied with the build tool and configuration choices, you can `eject` at any time. This command will remove the single build dependency from your project.

Instead, it will copy all the configuration files and the transitive dependencies (webpack, Babel, ESLint, etc) right into your project so you have full control over them. All of the commands except `eject` will still work, but they will point to the copied scripts so you can tweak them. At this point you're on your own.

You don't have to ever use `eject`. The curated feature set is suitable for small and middle deployments, and you shouldn't feel obligated to use this feature. However we understand that this tool wouldn't be useful if you couldn't customize it when you are ready for it.

## Learn More

You can learn more in the [Create React App documentation](https://facebook.github.io/create-react-app/docs/getting-started).

To learn React, check out the [React documentation](https://reactjs.org/).

### Code Splitting

This section has moved here: [https://facebook.github.io/create-react-app/docs/code-splitting](https://facebook.github.io/create-react-app/docs/code-splitting)

### Analyzing the Bundle Size

This section has moved here: [https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size](https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size)

### Making a Progressive Web App

This section has moved here: [https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app](https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app)

### Advanced Configuration

This section has moved here: [https://facebook.github.io/create-react-app/docs/advanced-configuration](https://facebook.github.io/create-react-app/docs/advanced-configuration)

### Deployment

This section has moved here: [https://facebook.github.io/create-react-app/docs/deployment](https://facebook.github.io/create-react-app/docs/deployment)

### `npm run build` fails to minify

This section has moved here: [https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify](https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify)
